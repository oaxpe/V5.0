-- MySQL Script generated by MySQL Workbench
-- Mon May 28 01:07:33 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema dendaProiektua
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `dendaProiektua` ;

-- -----------------------------------------------------
-- Schema dendaProiektua
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `dendaProiektua` DEFAULT CHARACTER SET utf8 ;
USE `dendaProiektua` ;

-- -----------------------------------------------------
-- Table `dendaProiektua`.`denda`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`denda` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`denda` (
  `dendKode` VARCHAR(25) NOT NULL,
  `dendIzena` VARCHAR(25) NULL,
  `dendHelbidea` VARCHAR(45) NULL,
  `dendHerria` VARCHAR(25) NULL,
  `dendPK` INT NULL,
  `dendTlf` VARCHAR(9) NULL,
  `dendEmail` VARCHAR(45) NULL,
  PRIMARY KEY (`dendKode`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`pertsona`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`pertsona` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`pertsona` (
  `pertsIzena` VARCHAR(25) NULL,
  `pertsAbiz1` VARCHAR(45) NULL,
  `pertsAbiz2` VARCHAR(45) NULL,
  `pertsNan` VARCHAR(9) NOT NULL,
  `pertsJaioData` VARCHAR(10) NULL,
  `pertsSexua` VARCHAR(25) NULL,
  `pertsHerria` VARCHAR(45) NULL,
  `pertsTlf` VARCHAR(9) NULL,
  PRIMARY KEY (`pertsNan`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`bezeroa`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`bezeroa` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`bezeroa` (
  `bezKode` VARCHAR(25) NOT NULL,
  `pertsona_pertsNan` VARCHAR(9) NOT NULL,
  PRIMARY KEY (`pertsona_pertsNan`, `bezKode`),
  INDEX `fk_bezeroa_pertsona1_idx` (`pertsona_pertsNan` ASC),
  CONSTRAINT `fk_bezeroa_pertsona1`
    FOREIGN KEY (`pertsona_pertsNan`)
    REFERENCES `dendaProiektua`.`pertsona` (`pertsNan`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`langilea`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`langilea` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`langilea` (
  `langKode` VARCHAR(25) NOT NULL,
  `langSoldata` DOUBLE NULL,
  `langEremua` VARCHAR(25) NULL,
  `pertsona_pertsNan` VARCHAR(9) NOT NULL,
  `denda_dendKode` VARCHAR(25) NOT NULL,
  PRIMARY KEY (`langKode`, `pertsona_pertsNan`, `denda_dendKode`),
  INDEX `fk_langilea_pertsona1_idx` (`pertsona_pertsNan` ASC),
  INDEX `fk_langilea_denda1_idx` (`denda_dendKode` ASC),
  CONSTRAINT `fk_langilea_pertsona1`
    FOREIGN KEY (`pertsona_pertsNan`)
    REFERENCES `dendaProiektua`.`pertsona` (`pertsNan`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_langilea_denda1`
    FOREIGN KEY (`denda_dendKode`)
    REFERENCES `dendaProiektua`.`denda` (`dendKode`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`produktua`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`produktua` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`produktua` (
  `prodId` INT NOT NULL AUTO_INCREMENT,
  `prodKode` VARCHAR(25) NOT NULL,
  `prodMarka` VARCHAR(45) NULL,
  `prodPrezioa` DECIMAL NULL,
  `prodKolorea` VARCHAR(45) NULL,
  `prodSexua` VARCHAR(25) NULL,
  `prodKantStock` INT NULL,
  PRIMARY KEY (`prodId`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`kamiseta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`kamiseta` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`kamiseta` (
  `kamiTaila` VARCHAR(3) NULL,
  `kamiSasoia` VARCHAR(15) NULL,
  `produktua_prodId` INT NOT NULL,
  PRIMARY KEY (`produktua_prodId`),
  CONSTRAINT `fk_kamiseta_produktua1`
    FOREIGN KEY (`produktua_prodId`)
    REFERENCES `dendaProiektua`.`produktua` (`prodId`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`jertsea`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`jertsea` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`jertsea` (
  `jertsTaila` VARCHAR(3) NULL,
  `produktua_prodId` INT NOT NULL,
  PRIMARY KEY (`produktua_prodId`),
  CONSTRAINT `fk_jertsea_produktua1`
    FOREIGN KEY (`produktua_prodId`)
    REFERENCES `dendaProiektua`.`produktua` (`prodId`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`praka`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`praka` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`praka` (
  `prakTaila` INT NULL,
  `prakSasoia` VARCHAR(15) NULL,
  `prakLuzeera` INT NULL,
  `prakMota` VARCHAR(25) NULL,
  `produktua_prodId` INT NOT NULL,
  PRIMARY KEY (`produktua_prodId`),
  CONSTRAINT `fk_praka_produktua1`
    FOREIGN KEY (`produktua_prodId`)
    REFERENCES `dendaProiektua`.`produktua` (`prodId`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`hornitzailea`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`hornitzailea` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`hornitzailea` (
  `hornKode` VARCHAR(25) NOT NULL,
  `hornIzena` VARCHAR(25) NULL,
  `hornHerria` VARCHAR(25) NULL,
  `hornTlf` VARCHAR(9) NULL,
  `hornEmail` VARCHAR(25) NULL,
  PRIMARY KEY (`hornKode`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`eskaera`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`eskaera` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`eskaera` (
  `eskKode` VARCHAR(25) NOT NULL,
  `eskHornitzailea` VARCHAR(45) NULL,
  `eskData` VARCHAR(10) NULL,
  `hornitzailea_hornKode` VARCHAR(25) NOT NULL,
  PRIMARY KEY (`eskKode`, `hornitzailea_hornKode`),
  INDEX `fk_eskaera_hornitzailea1_idx` (`hornitzailea_hornKode` ASC),
  CONSTRAINT `fk_eskaera_hornitzailea1`
    FOREIGN KEY (`hornitzailea_hornKode`)
    REFERENCES `dendaProiektua`.`hornitzailea` (`hornKode`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`salmenta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`salmenta` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`salmenta` (
  `salmKode` VARCHAR(25) NOT NULL,
  `salmHorn` VARCHAR(25) NULL,
  `salmData` DATE NULL,
  `salmKopurua` INT NULL,
  PRIMARY KEY (`salmKode`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`salmenta_has_produktua`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`salmenta_has_produktua` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`salmenta_has_produktua` (
  `salmenta_salmKode` VARCHAR(25) NOT NULL,
  `produktua_prodId` INT NOT NULL,
  PRIMARY KEY (`salmenta_salmKode`, `produktua_prodId`),
  INDEX `fk_salmenta_has_produktua_produktua1_idx` (`produktua_prodId` ASC),
  INDEX `fk_salmenta_has_produktua_salmenta1_idx` (`salmenta_salmKode` ASC),
  CONSTRAINT `fk_salmenta_has_produktua_salmenta1`
    FOREIGN KEY (`salmenta_salmKode`)
    REFERENCES `dendaProiektua`.`salmenta` (`salmKode`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_salmenta_has_produktua_produktua1`
    FOREIGN KEY (`produktua_prodId`)
    REFERENCES `dendaProiektua`.`produktua` (`prodId`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dendaProiektua`.`produktua_has_eskaera`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `dendaProiektua`.`produktua_has_eskaera` ;

CREATE TABLE IF NOT EXISTS `dendaProiektua`.`produktua_has_eskaera` (
  `produktua_prodId` INT NOT NULL,
  `eskaera_eskKode` VARCHAR(25) NOT NULL,
  `eskaera_hornitzailea_hornKode` VARCHAR(25) NOT NULL,
  PRIMARY KEY (`produktua_prodId`, `eskaera_eskKode`, `eskaera_hornitzailea_hornKode`),
  INDEX `fk_produktua_has_eskaera_eskaera1_idx` (`eskaera_eskKode` ASC, `eskaera_hornitzailea_hornKode` ASC),
  INDEX `fk_produktua_has_eskaera_produktua1_idx` (`produktua_prodId` ASC),
  CONSTRAINT `fk_produktua_has_eskaera_produktua1`
    FOREIGN KEY (`produktua_prodId`)
    REFERENCES `dendaProiektua`.`produktua` (`prodId`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_produktua_has_eskaera_eskaera1`
    FOREIGN KEY (`eskaera_eskKode` , `eskaera_hornitzailea_hornKode`)
    REFERENCES `dendaProiektua`.`eskaera` (`eskKode` , `hornitzailea_hornKode`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
